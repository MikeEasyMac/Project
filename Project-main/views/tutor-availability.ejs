<div class="container mt-4">
    <h2>Manage Your Availability</h2>

    <div class="card">
        <div class="card-body">
            <h5 class="card-title">Add New Availability Slot</h5>
            <form action="/tutor/availability" method="POST">
                <div class="row">
                    <div class="col-md-4">
                        <div class="form-group">
                            <label for="date">Date</label>
                            <input type="date" id="date" name="date" class="form-control" required>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="form-group">
                            <label for="start_time">Start Time</label>
                            <input type="time" id="start_time" name="start_time" class="form-control" required>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="form-group">
                            <label for="end_time">End Time</label>
                            <input type="time" id="end_time" name="end_time" class="form-control" required>
                        </div>
                    </div>
                </div>
                <button type="submit" class="btn btn-primary mt-3">Add Slot</button>
            </form>
        </div>
    </div>

    <div class="card mt-4">
        <div class="card-body">
            <h5 class="card-title">Your Available Slots</h5>
            <% if (availability && availability.length > 0) { %>
                <ul class="list-group">
                    <% availability.forEach(function(slot) { %>
                        <li class="list-group-item d-flex justify-content-between align-items-center">
                            <span>
                                <%= new Date(slot.start_time).toLocaleString() %> - <%= new Date(slot.end_time).toLocaleString() %>
                                <% if (slot.is_booked) { %>
                                    <span class="badge bg-danger">Booked</span>
                                <% } %>
                            </span>
                            <form action="/tutor/availability/<%= slot.id %>?_method=DELETE" method="POST" onsubmit="return confirm('Are you sure you want to delete this slot?');">
                                <button type="submit" class="btn btn-danger btn-sm">Delete</button>
                            </form>
                        </li>
                    <% }); %>
                </ul>
            <% } else { %>
                <p>You have no available slots.</p>
            <% } %>
        </div>
    </div>
</div>
