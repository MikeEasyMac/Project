<div class="container mt-5">
  <div class="d-flex justify-content-between align-items-center mb-5">
      <div>
          <h1 class="fw-bold text-white mb-0">Notifications</h1>
          <p class="text-white-50">Stay updated with your latest activities.</p>
      </div>
      <form action="/notifications/mark-all-read" method="POST">
          <button type="submit" class="btn btn-light fw-bold text-primary shadow-sm">
              <i class="fas fa-check-double me-2"></i>Mark All as Read
          </button>
      </form>
  </div>

  <div class="row justify-content-center">
      <div class="col-lg-10">
          <% if (notifications && notifications.length > 0) { %>
              <div class="list-group shadow-lg border-0 rounded-4 overflow-hidden">
                  <% notifications.forEach(function(notif) { %>
                      <div class="list-group-item p-4 d-flex align-items-start border-bottom <%= notif.is_read ? 'bg-light' : 'bg-white border-start border-5 border-primary' %>">
                          
                          <div class="me-4 mt-1">
                              <div class="rounded-circle d-flex align-items-center justify-content-center" 
                                   style="width: 45px; height: 45px; 
                                          background-color: <%= notif.is_read ? '#e9ecef' : '#e7f1ff' %>; 
                                          color: <%= notif.is_read ? '#6c757d' : '#0d6efd' %>;">
                                  
                                  <% if (notif.type === 'grade') { %> <i class="fas fa-graduation-cap"></i> <% } 
                                  else if (notif.type === 'assignment') { %> <i class="fas fa-book"></i> <% } 
                                  else if (notif.type === 'qa') { %> <i class="fas fa-comments"></i> <% } 
                                  else if (notif.type === 'course') { %> <i class="fas fa-chalkboard"></i> <% } 
                                  else if (notif.type === 'request') { %> <i class="fas fa-calendar-check"></i> <% } 
                                  else if (notif.type === 'resource') { %> <i class="fas fa-file-download"></i> <% } 
                                  else { %> <i class="fas fa-bell"></i> <% } %>
                              </div>
                          </div>

                          <div class="flex-grow-1">
                              <div class="d-flex justify-content-between align-items-center mb-1">
                                  <h6 class="mb-0 fw-bold <%= notif.is_read ? 'text-muted' : 'text-dark' %>">
                                      <%= notif.type ? notif.type.charAt(0).toUpperCase() + notif.type.slice(1) : 'System' %> Update
                                  </h6>
                                  <small class="text-muted"><%= new Date(notif.created_at).toLocaleDateString() %></small>
                              </div>
                              
                              <p class="mb-2 <%= notif.is_read ? 'text-muted' : 'text-dark' %>">
                                  <%= notif.message %>
                              </p>

                              <% if (notif.link) { %>
                                  <a href="<%= notif.link %>" class="text-decoration-none fw-bold small">
                                      View Details <i class="fas fa-arrow-right ms-1"></i>
                                  </a>
                              <% } %>
                          </div>

                          <% if (!notif.is_read) { %>
                              <form action="/notifications/<%= notif.id %>/mark-read" method="POST" class="ms-3">
                                  <button type="submit" class="btn btn-sm btn-outline-secondary rounded-circle" title="Mark as Read">
                                      <i class="fas fa-check"></i>
                                  </button>
                              </form>
                          <% } %>

                      </div>
                  <% }); %>
              </div>
          <% } else { %>
              <div class="text-center py-5">
                  <div class="text-white opacity-50 display-1 mb-3">ðŸ”•</div>
                  <h3 class="text-white">All caught up!</h3>
                  <p class="text-white-50">You have no new notifications.</p>
              </div>
          <% } %>
      </div>
  </div>
</div>